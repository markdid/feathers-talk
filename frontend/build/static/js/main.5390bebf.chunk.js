(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(74)},69:function(e,t){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(33),r=a.n(s),c=a(37),o=a(2),i=a(3),u=a(5),m=a(4),f=a(6),d=a(34),h=a(35),g=a.n(h),p=a(11),v=a.n(p),x=g()("http://localhost:3030"),E=v()();E.configure(v.a.socketio(x)),E.configure(v.a.authentication({storage:window.localStorage}));var b=E,w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"updateField",value:function(e){this.setState(Object(d.a)({},e.target.name,e.target.value))}},{key:"handleLogin",value:function(){var e=this,t=this.state,a=t.email,n=t.password;return console.log("processing"),b.authenticate({strategy:"local",email:a,password:n}).catch(function(t){return e.setState({error:t})})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("p",null,this.state.error&&this.state.error.message),l.a.createElement("form",null,l.a.createElement("input",{type:"email",name:"email",placeholder:"email",onChange:function(t){return e.updateField(t)}}),l.a.createElement("input",{type:"password",name:"password",placeholder:"password",onChange:function(t){return e.updateField(t)}}),l.a.createElement("button",{type:"button",id:"login",onClick:function(){return e.handleLogin()}},"Log in")))}}]),t}(n.Component),y=a(36),k=a.n(y),N=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"sendMessage",value:function(e){var t=e.target.querySelector('[name="text"]'),a=t.value.trim();a&&b.service("messages").create({text:a}).then(function(){t.value=""}),e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props,a=t.users,n=t.messages;return l.a.createElement("div",{className:"flex flex-column"},l.a.createElement("header",{className:"title-bar flex flex-row flex-center"},l.a.createElement("div",{className:"title-wrapper block center-element"},l.a.createElement("span",{className:"title"},"Chat"))),l.a.createElement("div",{className:"flex flex-row flex-1 clear"},l.a.createElement("div",{className:"sidebar col col-3 flex flex-column flex-space-between"},l.a.createElement("ul",{className:"flex flex-column flex-1 list-unstyled user-list"},a.map(function(e){return l.a.createElement("li",{key:e._id},l.a.createElement("a",{className:"block relative",href:"#"},e.email))})),l.a.createElement("footer",{className:"flex flex-row flex-center"},l.a.createElement("a",{href:"#logout",onClick:function(){return b.logout()}},"Sign Out")))),l.a.createElement("div",{className:"flex flex-column col col-9"},l.a.createElement("div",{className:"chat flex flex-column flex-1 clear",ref:function(t){e.chat=t}},n.map(function(e){return l.a.createElement("div",{className:"message flex flex-row",key:e._id},l.a.createElement("p",{className:"message-header"},l.a.createElement("span",{className:"username font-600"},e.user.email),l.a.createElement("span",{className:"sent-date font-300"},k()(e.createdAt).format("MMM Do, hh:mm:ss"))),l.a.createElement("p",{className:"message-content font-300"},e.text))})),l.a.createElement("form",{onSubmit:this.sendMessage.bind(this),className:"flex flex-row flex-space-between",id:"send-message"},l.a.createElement("input",{type:"text",name:"text",className:"flex flex-1"}),l.a.createElement("button",{className:"button-primary",type:"submit"},"Send"))))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={login:null,len:0},a}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=b.service("messages"),a=b.service("users"),n=b.service("sockets");b.authenticate().catch(function(){return e.setState({login:null})}),b.on("authenticated",function(l){Promise.all([t.find({query:{$sort:{createdAt:-1},$limit:25}}),a.find(),n.find()]).then(function(t){var a=Object(c.a)(t,3),n=a[0],s=a[1],r=a[2],o=n.data.reverse(),i=s.data,u=r;console.log(u),e.setState({login:l,messages:o,users:i,len:e.state.len+=10})})}),b.on("logout",function(){return e.setState({login:null,messages:null,users:null})}),t.on("created",function(t){return e.setState({messages:e.state.messages.concat(t)})}),a.on("created",function(t){return e.setState({users:e.state.users.concat(t)})})}},{key:"render",value:function(){return void 0===this.state.login?l.a.createElement("div",null,l.a.createElement("h1",null,"loading...?")):this.state.login?l.a.createElement(N,{messages:this.state.messages,users:this.state.users}):l.a.createElement("div",null,l.a.createElement(w,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.5390bebf.chunk.js.map